<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>SELOR Frans (B2) ‚Äì Oefenapp</title>

<link rel="apple-touch-icon" href="icon.png">

<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: #f4f4f9;
    color: #333;
  }

  header {
    background: #006ab3; /* NMBS Blauw */
    color: white;
    padding: 16px 12px;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  }

  header h1 { margin: 0 0 6px 0; font-size: 20px; }
  header p  { margin: 0; opacity: 0.95; font-size: 14px; }

  nav {
    display: flex;
    flex-wrap: wrap;
    background: #ffffff;
    border-bottom: 1px solid #ddd;
  }

  nav button {
    flex: 1;
    padding: 15px 5px;
    border: none;
    background: #fff;
    font-size: 14px;
    cursor: pointer;
    font-weight: 600;
    color: #555;
    border-bottom: 3px solid transparent;
  }

  nav button.active {
    color: #006ab3;
    border-bottom: 3px solid #006ab3;
    background-color: #f9f9f9;
  }

  section {
    display: none;
    padding: 16px;
    max-width: 800px;
    margin: 0 auto;
    padding-bottom: 80px; /* Ruimte voor scroll */
  }

  section.active {
    display: block;
  }

  .card {
    background: white;
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 14px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.08);
    border-left: 5px solid #006ab3;
  }

  .row {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
    margin-top: 10px;
  }

  button.action {
    background-color: #006ab3;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 12px 16px;
    font-size: 16px;
    cursor: pointer;
    font-weight: bold;
    flex-grow: 1; /* Knoppen vullen de breedte */
  }
  
  button.action:active { background-color: #004d80; }

  button.secondary {
    background-color: #e0e0e0;
    color: #333;
  }

  .iconBtn {
    background: none;
    border: 1px solid #ccc;
    border-radius: 6px;
    padding: 10px 12px;
    font-size: 16px;
    cursor: pointer;
    background-color: #fff;
  }

  h3 { color: #d32f2f; }

  .timer {
    font-weight: bold;
    color: #d32f2f;
    font-size: 1.2rem;
    margin: 15px 0;
    text-align: center;
    border: 2px solid #ddd;
    padding: 10px;
    border-radius: 8px;
    background: #fff;
  }

  .small {
    font-size: 14px;
    opacity: 0.8;
    margin-top: 15px;
    line-height: 1.4;
    font-style: italic;
  }
  
  .activeQuestion {
    font-size: 16px;
    font-weight: bold;
    margin: 12px 0 8px 0;
    color: #006ab3;
  }

  .helpLink {
    display: block;
    margin-top: 10px;
    color: #006ab3;
    text-decoration: underline;
    cursor: pointer;
    font-size: 14px;
  }

  .helpBox {
    display: none;
    margin-top: 10px;
    padding: 12px;
    border-radius: 8px;
    background: #eef6fb;
    border: 1px solid #cfe2f3;
    line-height: 1.4;
    font-size: 14px;
  }
  .helpBox ul { margin: 8px 0 0 18px; padding: 0; }
  .helpBox li { margin: 6px 0; list-style-position: inside; }

  hr {
    border: none;
    border-top: 1px solid #eee;
    margin: 20px 0;
  }

  /* Lijst voor zelftest */
  #zelftestVragen {
    list-style: none;
    padding: 0;
    max-height: 300px;
    overflow-y: auto;
    border: 1px solid #eee;
  }
  #zelftestVragen li {
    padding: 10px;
    border-bottom: 1px solid #eee;
    font-size: 14px;
  }
  #zelftestVragen li:hover, #zelftestVragen li.selected {
    background-color: #e6f0fa;
    font-weight: bold;
  }

  audio { width: 100%; margin-top: 10px; }

  /* Antwoord tekst */
  #oefenAntwoord, #simAntwoord {
    background-color: #f1f4f8;
    padding: 15px;
    border-radius: 6px;
    line-height: 1.6;
    color: #222;
    border: 1px solid #dce4ec;
  }

  @media (max-width: 480px) {
    nav button { font-size: 13px; padding: 12px 4px; }
    .card { padding: 15px; }
  }
</style>
</head>

<body>

<header>
  <h1>SELOR B2 (NMBS)</h1>
  <p>Oefenapp voor Mondeling Frans</p>
</header>

<nav>
  <button class="active" onclick="showTab('oefen', this)">Oefenen</button>
  <button onclick="showTab('simulatie', this)">Simulatie</button>
  <button onclick="showTab('zelftest', this)">Zelftest</button>
  <button onclick="showTab('spiek', this)">Spiekbrief</button>
</nav>

<!-- OEFENEN TAB -->
<section id="oefen" class="active">
  <div class="card">
    <div style="display:flex; justify-content:space-between; align-items:flex-start;">
        <h3 id="oefenVraag" style="margin:0; font-size:1.1rem; flex:1;">Laden...</h3>
    </div>
    
    <div class="row" style="justify-content: flex-end;">
         <button class="iconBtn" onclick="speakText(stripPrefixForSpeech(document.getElementById('oefenVraag').innerText))">üîä Luister Vraag</button>
    </div>

    <span class="helpLink" onclick="toggleHelp('help-oefenen')">‚ÑπÔ∏è Hoe werkt dit?</span>
    <div class="helpBox" id="help-oefenen">
      <strong>Stappenplan:</strong>
      <ul>
        <li>Lees de vraag.</li>
        <li>Antwoord hardop (30‚Äì60 sec).</li>
        <li>Klik <strong>Toon antwoord</strong> en vergelijk.</li>
        <li>Gebruik üîä om de uitspraak te oefenen.</li>
      </ul>
    </div>

    <hr>

    <p id="oefenAntwoord" style="display:none;"></p>

    <div class="row">
      <button class="action secondary" onclick="toggleAntwoord()">üëÅÔ∏è Toon / Verberg Antwoord</button>
      <button class="iconBtn" onclick="speakText(stripPrefixForSpeech(document.getElementById('oefenAntwoord').innerText))">üîä Luister Antwoord</button>
    </div>

    <div class="row" style="margin-top:20px;">
      <button class="action" onclick="vorigeVraag()">‚¨ÖÔ∏è Vorige</button>
      <button class="action" onclick="volgendeVraag()">Volgende ‚û°Ô∏è</button>
    </div>
    
    <div style="text-align:center; margin-top:10px; font-size:0.9rem; color:#777;">
        Vraag <span id="oefenCounter">1</span> van <span id="oefenTotal"></span>
    </div>
  </div>
</section>

<!-- SIMULATIE TAB -->
<section id="simulatie">
  <div class="card">
    <h3 id="simVraag" style="margin:0;">Klik op 'Nieuwe vraag' om te starten</h3>
    
    <div class="row" style="justify-content: flex-end;">
         <button class="iconBtn" onclick="speakText(stripPrefixForSpeech(document.getElementById('simVraag').innerText))">üîä Vraag</button>
    </div>

    <span class="helpLink" onclick="toggleHelp('help-simulatie')">‚ÑπÔ∏è Hoe werkt simulatie?</span>
    <div class="helpBox" id="help-simulatie">
      <strong>Doel:</strong> Tijdsdruk oefenen.<br>
      Je krijgt een willekeurige vraag. De timer loopt 60 seconden. Blijf praten tot de tijd om is!
    </div>

    <p class="timer" id="timer">00:60</p>

    <div class="row">
      <button class="action" onclick="startSimulatie()">üé≤ Nieuwe willekeurige vraag</button>
    </div>
    
    <div class="row">
      <button class="action secondary" onclick="toonSimAntwoord()">Ik ben klaar ‚Üí Toon antwoord</button>
    </div>

    <p id="simAntwoord" style="display:none; margin-top:10px;"></p>
    
    <div class="row" id="simAudioBtn" style="display:none;">
        <button class="iconBtn" onclick="speakText(stripPrefixForSpeech(document.getElementById('simAntwoord').innerText))">üîä Luister Antwoord</button>
    </div>

    <hr>

    <h4 style="margin:0 0 8px 0;">üéôÔ∏è Jezelf opnemen (Lokaal)</h4>
    <div class="row">
      <button class="action" id="btnRecStart" onclick="startRecording()">üî¥ Start</button>
      <button class="action secondary" id="btnRecStop" onclick="stopRecording()" disabled>‚èπ Stop</button>
      <button class="action secondary" id="btnRecPlay" onclick="playRecording()" disabled>‚ñ∂Ô∏è Luister</button>
    </div>
    <p class="small" id="recStatus" style="margin-top:5px;">Microfoon vereist HTTPS of localhost.</p>
    <audio id="recAudio" controls style="display:none;"></audio>
  </div>
</section>

<!-- ZELFTEST TAB -->
<section id="zelftest">
  <div class="card">
    <h3 style="margin-top:0;">Zelftest (Lijstweergave)</h3>
    <p class="small" style="margin-top:0;">
      Kies een vraag om te testen zonder hulp.
    </p>

    <span class="helpLink" onclick="toggleHelp('help-zelftest')">‚ÑπÔ∏è Hoe werkt de zelftest?</span>
    <div class="helpBox" id="help-zelftest">
      <strong>Doel:</strong> Test jezelf zonder antwoorden.<br>
      <ul>
        <li>Klik op een vraag uit de lijst hieronder.</li>
        <li>De timer (50 sec) start meteen.</li>
        <li>Spreek luidop. Er is hier <strong>geen</strong> antwoordknop!</li>
      </ul>
    </div>

    <p class="timer" id="zelftestTimer">50 sec</p>
    
    <h4 id="zelftestActiveVraag" class="activeQuestion" style="min-height:30px;">
      Selecteer een vraag hieronder...
    </h4>

    <ul id="zelftestVragen"></ul>

    <div class="row">
      <button class="action" onclick="startZelftestTimer()">üîÑ Herstart timer</button>
    </div>
  </div>
</section>


<!-- SPIEKBRIEF TAB -->
<section id="spiek">
  <div class="card">
    <h3 style="margin-top:0;">Spiekbriefje (EHBO)</h3>
    <p class="small" style="margin-top:0;">
      Gebruik deze structuren als je vastloopt.
    </p>

    <span class="helpLink" onclick="toggleHelp('help-spiek')">‚ÑπÔ∏è Wanneer gebruik ik dit?</span>
    <div class="helpBox" id="help-spiek">
      <strong>Doel:</strong> Hulp bij 'black-outs'.<br>
      Gebruik deze zinnen als je even niet weet wat zeggen. Leer de <strong>structuur</strong> (D'abord, Ensuite...) vanbuiten.
    </div>

    <hr>

    <h4 style="color:#006ab3;">1. Startzinnen</h4>
    <ul>
      <li><strong>En g√©n√©ral...</strong> (In het algemeen...)</li>
      <li><strong>Dans mon travail √† la SNCB...</strong></li>
      <li><strong>Pour r√©pondre √† votre question...</strong></li>
    </ul>

    <h4 style="color:#006ab3;">2. Structuur (Gouden Regel)</h4>
    <ul>
      <li><strong>D‚Äôabord</strong>, je v√©rifie... (Eerst)</li>
      <li><strong>Ensuite</strong>, j'explique... (Vervolgens)</li>
      <li><strong>Par exemple</strong>, si un voyageur... (Bijv.)</li>
      <li><strong>Finalement</strong>, je propose... (Ten slotte)</li>
    </ul>

    <h4 style="color:#006ab3;">3. Noodzinnen</h4>
    <ul>
      <li><strong>Pouvez-vous r√©p√©ter, s‚Äôil vous pla√Æt ?</strong></li>
      <li><strong>Je cherche le mot en fran√ßais...</strong></li>
      <li><strong>Pardon, je voulais dire que...</strong></li>
    </ul>
    
    <h4 style="color:#006ab3;">4. Kernwoorden Veiligheid</h4>
    <ul>
      <li><strong>La s√©curit√© est prioritaire.</strong></li>
      <li><strong>Je reste calme et poli.</strong></li>
      <li><strong>J'applique la proc√©dure.</strong></li>
      <li><strong>Je contacte le SOC / Securail.</strong></li>
    </ul>
  </div>
</section>


<script>
  // =======================================================
  // DATA: Alle 13 Hoofdstukken (1.1 t.e.m. 13.6 Compleet)
  // =======================================================
  const vragen = [
    // 1. Parcours
    { vraag: "1.1 Quelle est votre profession actuelle ? Depuis quand exercez-vous cette fonction ?", antwoord: "Je suis accompagnateur de train √† la SNCB. Je fais ce m√©tier depuis [X] ans. J‚Äôaime beaucoup le contact avec les clients et le fait de bouger tout le temps." },
    { vraag: "1.2 Dans quel d√©p√¥t travaillez-vous ? Est-ce loin de votre domicile ?", antwoord: "Je travaille au d√©p√¥t de [Naam]. C'est √† environ [X] minutes de chez moi. C'est assez proche, donc c'est facile pour organiser ma vie priv√©e." },
    { vraag: "1.3 √ätes-vous satisfait ?", antwoord: "Oui, je suis satisfait. Le travail est utile et vari√©. J'aime l'ambiance avec les coll√®gues. Parfois c'est stressant √† cause des retards, mais globalement j'aime mon job." },
    { vraag: "1.4 Comment √™tes-vous entr√© √† la SNCB ? Qui vous a donn√© l‚Äôid√©e/l‚Äôenvie ?", antwoord: "J'ai vu une offre d'emploi sur internet (ou : un ami m'en a parl√©). Je cherchais un emploi stable et j'aime le service public. J'ai donc postul√©." },
    { vraag: "1.5 Quelles √©tudes avez-vous faites ? Pourquoi n‚Äôavez-vous pas continu√© dans cette voie ?", antwoord: "J‚Äôai √©tudi√© [Uw richting]. Mais je ne voulais pas rester assis dans un bureau. Je voulais un travail plus dynamique avec du contact humain." },
    { vraag: "1.6 Est-ce votre premier travail ? Sinon, qu‚Äôavez-vous fait avant ? Pourquoi avez-vous chang√© ?", antwoord: "Non, avant j'ai travaill√© comme [Job]. J'ai chang√© parce que je voulais plus de s√©curit√© d'emploi et de meilleures conditions." },

    // 2. Profession
    { vraag: "2.1 Quelles sont les qualit√©s d‚Äôun bon accompagnateur de train ?", antwoord: "Il faut √™tre calme, poli et tr√®s ponctuel. Il faut aussi bien conna√Ætre les r√®gles de s√©curit√© et savoir g√©rer le stress en cas de probl√®me." },
    { vraag: "2.2 Quels sont les avantages de travailler √† la SNCB ?", antwoord: "Les avantages sont la s√©curit√© de l'emploi (statutaire), le salaire correct, les cong√©s et la possibilit√© de voyager gratuitement en train." },
    { vraag: "2.3 Quels sont les avantages et les d√©savantages de votre travail ?", antwoord: "Avantages: La libert√© et le contact social. D√©savantages: Les horaires irr√©guliers (t√¥t/tard/week-end) et parfois l'agressivit√© des voyageurs." },
    { vraag: "2.4 Prenez-vous le train en dehors de votre travail ? Facilit√©s ?", antwoord: "Oui, je prends souvent le train. Ma famille proche (conjoint, enfants) voyage aussi gratuitement en Belgique. C‚Äôest un tr√®s grand avantage." },
    { vraag: "2.5 Avez-vous des possibilit√©s d‚Äôavancement dans votre carri√®re ?", antwoord: "Oui, on peut devenir chef d'√©quipe ou formateur. Pour l'instant, je suis bien dans ma fonction, mais peut-√™tre plus tard." },
    { vraag: "2.6 Comment devient-on accompagnateur de train ? (Recrutement ‚Äì Formation)", antwoord: "D'abord des tests psychotechniques et m√©dicaux. Ensuite une formation intensive : th√©orie sur la s√©curit√©/tickets et pratique sur le terrain." },
    { vraag: "2.7 D√©crivez votre r√¥le/vos t√¢ches/vos responsabilit√©s !", antwoord: "Ma priorit√© est la s√©curit√© (fermeture des portes, d√©part). Ensuite, je contr√¥le les titres de transport, j'informe les voyageurs et je g√®re les probl√®mes." },
    { vraag: "2.8 Comment se passe une journ√©e ordinaire de travail ?", antwoord: "Je v√©rifie mon planning, je prends mon mat√©riel. Je rejoins mon train, je v√©rifie la s√©curit√©, je fais le d√©part et ensuite je contr√¥le les billets." },

    // 3. Horaires
    { vraag: "3.1 Qu‚Äôest-ce qu‚Äô√™tre ¬´ en s√©rie ¬ª, ¬´ hors-s√©rie ¬ª, ¬´ planton ¬ª, ¬´ en service l√©ger ¬ª ?", antwoord: "En s√©rie: Horaires fixes. Hors-s√©rie: Horaires variables. Planton: En r√©serve au d√©p√¥t. Service l√©ger: Moins d'heures (m√©dical)." },
    { vraag: "3.2 Quels sont vos horaires de travail ?", antwoord: "C'est tr√®s variable. Parfois je commence √† 4h, parfois je finis √† 1h du matin. Je travaille aussi les samedis, dimanches et jours f√©ri√©s." },
    { vraag: "3.3 Aimez-vous ce rythme de travail ? Est-ce compatible avec votre vie sociale ?", antwoord: "On s'habitue. L'avantage c'est d'avoir cong√© en semaine. Mais il faut bien s'organiser avec la famille pour les week-ends." },

    // 4. Materiel
    { vraag: "4.1 De quel mat√©riel l‚Äôaccompagnateur a-t-il besoin pour travailler ?", antwoord: "Ma tablette (IBIS) pour les horaires, ma pince pour valider, mon sifflet pour le d√©part et ma cl√© de Berne pour les portes." },
    { vraag: "4.2 D√©crivez votre uniforme ! En √™tes-vous satisfait ?", antwoord: "Pantalon bleu, chemise, cravate, veste SNCB. Je suis satisfait car il est confortable et les voyageurs me reconnaissent tout de suite." },
    { vraag: "4.3 Quels sont les diff√©rents types de train qui existent √† la SNCB ?", antwoord: "Il y a les automotrices (moteurs int√©gr√©s, ex: Desiro) et les trains tract√©s (locomotive + voitures). Les syst√®mes de portes sont diff√©rents." },
    { vraag: "4.4 Dans quel type de mat√©riel pr√©f√©rez-vous travailler ? Pourquoi ?", antwoord: "Je pr√©f√®re les modernes (Desiro, M7). Ils sont confortables, il y a la climatisation et de meilleures informations pour les voyageurs." },

    // 5. Controle
    { vraag: "5.1 Comment contr√¥lez-vous un titre de transport ?", antwoord: "Je salue, je demande le titre, je v√©rifie la date et le trajet, je scanne/poin√ßonne et je souhaite un bon voyage." },
    { vraag: "5.2 Que faites-vous si un voyageur n‚Äôest pas en ordre ?", antwoord: "Je reste calme et poli. J'explique le probl√®me. Je propose de payer le tarif √† bord ou je fais un constat (C170)." },
    { vraag: "5.2.1 Pas de ticket", antwoord: "Il doit payer le billet + suppl√©ment (Tarif √† Bord). S'il refuse, je r√©dige un constat (C170) avec sa carte d'identit√©." },
    { vraag: "5.2.2 Pas d‚Äôargent - pas de carte d‚Äôidentit√©", antwoord: "Si je ne peux pas l'identifier, je peux demander l'assistance de Securail ou de la Police pour v√©rifier son identit√©." },
    { vraag: "5.2.3 A rempli son multi dans le train ...", antwoord: "C'est interdit. Le Multi doit √™tre rempli avant de monter. Normalement c'est une amende, mais je peux √™tre flexible si c'est la premi√®re fois." },
    { vraag: "5.3 Quels sont les types de fraude les plus fr√©quents ?", antwoord: "Pas de billet, billet non dat√©, abonnement oubli√©, ou voyager en 1√®re classe avec un billet 2√®me." },
    { vraag: "5.4 Quelles sont les amendes les plus fr√©quentes ?", antwoord: "Le constat (C170) est de 75‚Ç¨ (ou 90‚Ç¨ si envoy√© √† domicile). Souvent pour 'd√©faut de titre de transport'." },
    { vraag: "5.5 L‚Äôamende est-elle toujours justifi√©e ?", antwoord: "Oui, si les r√®gles ne sont pas respect√©es. Mais je peux faire juste un avertissement verbal si le voyageur est de bonne foi." },
    { vraag: "5.6 Quelle est la suite accord√©e par la SNCB √† vos amendes ?", antwoord: "Je transmets les donn√©es au bureau. Ils envoient une lettre pour payer. S'il ne paie pas, √ßa va chez l'huissier." },
    { vraag: "5.7 √ätes-vous un accompagnateur s√©v√®re ?", antwoord: "Non, je suis juste. J'applique le r√®glement mais je reste humain. Le but n'est pas de punir, mais que tout le monde paie sa place." },
    { vraag: "5.8 Rep√©rez-vous un fraudeur √† son attitude ?", antwoord: "Oui, souvent. Ils √©vitent mon regard, font semblant de dormir, ou changent de place quand ils me voient." },
    { vraag: "5.9 Quels sont les types de fraudeurs les plus fr√©quents ?", antwoord: "Pas de profil type. √âtudiants, travailleurs, touristes... Souvent ils esp√®rent ne pas √™tre contr√¥l√©s sur un court trajet." },
    { vraag: "5.10 Y a-t-il souvent des resquilleurs dans les toilettes ?", antwoord: "Oui. Si quelqu'un reste trop longtemps quand j'arrive, je frappe et j'attends qu'il sorte pour contr√¥ler." },
    { vraag: "5.11 Faites-vous toujours le contr√¥le?", antwoord: "J'essaie. Mais si le train est bond√© (heure de pointe), c'est impossible. La s√©curit√© est prioritaire sur le contr√¥le." },
    { vraag: "5.12 A part les titres de transport, que contr√¥lez-vous aussi ?", antwoord: "Je v√©rifie la propret√©, les portes, la temp√©rature, l'√©clairage et les √©crans d'information." },
    { vraag: "5.13 Quelles informations vous demandent les voyageurs ?", antwoord: "Ce train s'arr√™te √† X ? On arrive quand ? Quel quai pour ma correspondance ? Pourquoi le retard ?" },

    // 6. Titres de transport
    { vraag: "6.1 Quels sont les titres de transport les plus vendus ?", antwoord: "Standard Ticket, Weekend Ticket, Youth Ticket, Senior Ticket et les abonnements." },
    { vraag: "6.2 Quels documents doit avoir le voyageur pour justifier un titre ?", antwoord: "Le billet (papier ou num√©rique) et parfois la carte d'identit√© (pour prouver l'√¢ge ou l'abonnement)." },
    { vraag: "6.3 Quels sont les billets ¬´ √† r√©duction ¬ª ?", antwoord: "Famille Nombreuse, Intervention Major√©e (BIM), Militaires, Journalistes." },
    { vraag: "6.4 Comment faut-il remplir correctement les ¬´ Multi¬ª ?", antwoord: "√âcrire jour, date, d√©part et arriv√©e en toutes lettres. Pas de ratures. Tout √©crire AVANT de monter." },
    { vraag: "6.5 Que peut faire un voyageur s‚Äôil a perdu son titre ?", antwoord: "Il doit en acheter un nouveau. Un billet perdu est consid√©r√© comme inexistant." },
    { vraag: "6.6 Que peut faire un voyageur avec un billet non utilis√© ?", antwoord: "S'il n'est pas valid√©, il peut parfois demander un remboursement au guichet (selon les conditions)." },
    { vraag: "6.7 Que peut faire un voyageur qui a oubli√© son abonnement ?", antwoord: "Je fais un constat. Il a 14 jours pour montrer son abonnement au guichet. Il ne paiera que des frais administratifs." },
    { vraag: "6.8 O√π et comment acheter un titre de transport ?", antwoord: "Sur l'application SNCB, sur le site web, aux automates dans les gares, ou aux guichets." },
    { vraag: "6.9 Comment √™tes-vous inform√© sur les nouveaux titres ?", antwoord: "Via ma tablette (digital), les briefings au d√©p√¥t, ou les e-mails internes de la SNCB." },
    { vraag: "6.10 La SNCB a-t-elle r√©cemment lanc√© un nouveau produit ?", antwoord: "Oui, par exemple le 'Flex Abonnement' pour le t√©l√©travail (2 ou 3 jours par semaine)." },
    { vraag: "6.11 Quelles sont les offres temporaires annuelles ?", antwoord: "Le 'Duo Ticket' (2 billets pour 1) ou des promotions pendant les vacances (Winter Promo)." },
    { vraag: "6.12 Peut-on acheter un billet de train longtemps √† l‚Äôavance ?", antwoord: "Oui, pour le national : 30 jours √† l'avance. Pour l'international (TGV) : plusieurs mois √† l'avance." },
    { vraag: "6.13 Si le voyageur n‚Äôa pas de titre, que doit-il faire ?", antwoord: "Venir me trouver AVANT ou tout de suite apr√®s le d√©part pour acheter au Tarif √† Bord. Sinon, le suppl√©ment est plus cher." },
    { vraag: "6.14 Faut-il toujours payer un suppl√©ment dans le train ?", antwoord: "Oui, sauf si le voyageur monte dans une gare o√π il n'y a pas d'automate ou si l'automate √©tait en panne." },

    // 7. Lignes
    { vraag: "7.1 Quelles lignes faites-vous ?", antwoord: "Je travaille sur les lignes qui partent de mon d√©p√¥t (ex: Bruxelles-Anvers). Je vais un peu partout en Belgique." },
    { vraag: "7.2 Quelles lignes pr√©f√©rez-vous ou d√©testez-vous ?", antwoord: "Je pr√©f√®re les lignes IC (InterCity) car les trajets sont plus longs et calmes. J'aime moins les lignes L (Omnibus) car il y a trop d'arr√™ts." },
    { vraag: "7.3 Y a-t-il des lignes plus dangereuses ?", antwoord: "Oui, certaines lignes autour des grandes villes tard le soir peuvent √™tre plus difficiles √† cause de l'ins√©curit√© ou de l'alcool." },

    // 8. Problemes
    { vraag: "8.1 Quels sont les probl√®mes les plus fr√©quents avec les voyageurs ?", antwoord: "Les discussions sur la validit√© du ticket, les nuisances sonores, les pieds sur les si√®ges et parfois l'agressivit√©." },
    { vraag: "8.2 Pourquoi les voyageurs sont-ils agressifs ?", antwoord: "Souvent √† cause d'un retard, d'un train supprim√©, ou parce qu'ils n'ont pas de billet et ne veulent pas payer." },
    { vraag: "8.3 Les voyageurs ont-ils parfois ¬´ raison ¬ª d‚Äô√™tre agressifs ?", antwoord: "Ils ont raison d'√™tre m√©contents si le service n'est pas bon, mais l'agressivit√© verbale ou physique n'est jamais acceptable." },
    { vraag: "8.4 Avez-vous d√©j√† √©t√© victime d‚Äôune agression ?", antwoord: "Oui, verbalement, des insultes. C'est courant mais je reste calme. (OU: Non, heureusement)." },
    { vraag: "8.5 Quels sont vos recours si vous √™tes menac√© ?", antwoord: "Je peux appeler le SOC pour demander l'intervention de Securail ou de la Police. Je peux aussi porter plainte." },
    { vraag: "8.6 En √™tes-vous satisfait ?", antwoord: "Oui, le syst√®me de soutien est bon. On a aussi un support psychologique apr√®s une agression grave." },
    { vraag: "8.7 Que fait la SNCB pour am√©liorer votre s√©curit√© ?", antwoord: "Il y a plus de cam√©ras dans les trains et les gares, plus d'agents Securail, et des campagnes de sensibilisation." },
    { vraag: "8.8 √ätes-vous pr√©par√© au probl√®me d‚Äôagression ?", antwoord: "Oui, nous avons suivi des cours de 'gestion de conflits' pour apprendre √† d√©sescalader une situation tendue." },
    { vraag: "8.9 Que faites-vous si un voyageur est malade ?", antwoord: "Je demande si un m√©decin est pr√©sent. Si c'est grave, j'appelle le SOC pour faire venir une ambulance √† la prochaine gare." },
    { vraag: "8.10 √ätes-vous pr√©par√© √† cette situation (m√©dicale) ?", antwoord: "Oui, nous avons tous le brevet de secourisme. Nous savons faire les premiers gestes (RCP, d√©fibrillateur)." },
    { vraag: "8.11 Que faites-vous face √† un voyageur ivre ?", antwoord: "S'il est calme, je le laisse dormir. S'il est agressif, je demande l'intervention de la police pour le faire descendre." },
    { vraag: "8.12 Si un voyageur a oubli√© un objet, que doit-il faire ?", antwoord: "Il doit remplir un formulaire 'objets perdus' sur le site web de la SNCB." },
    { vraag: "8.13 Que faites-vous des objets trouv√©s ?", antwoord: "Si je trouve un objet, je mets une √©tiquette avec les d√©tails et je le d√©pose au guichet de la gare terminus." },
    { vraag: "8.14 Si un voyageur est d√©voy√© (perdu), comme l‚Äôaidez-vous ?", antwoord: "Je le rassure. Je regarde sur mon application quel est le meilleur itin√©raire et je lui explique." },
    { vraag: "8.15 Que faites-vous si un voyageur est en 1√®re avec un billet 2√®me ?", antwoord: "Je lui demande poliment de changer de place vers la 2√®me classe. Ou il peut payer un surclassement." },
    { vraag: "8.16 Quand et comment d√©classez-vous une voiture ?", antwoord: "Si la 2√®me classe est pleine et la 1√®re est vide, je peux d√©cider de 'd√©classer'. Je fais une annonce au micro." },
    { vraag: "8.17 De quoi se plaignent les voyageurs ?", antwoord: "Des retards, des trains trop courts (pas de place assis), des toilettes sales, et de la temp√©rature." },
    { vraag: "8.18 Comment r√©agissent les voyageurs en cas de probl√®me ?", antwoord: "La plupart sont compr√©hensifs mais r√©sign√©s. D'autres s'√©nervent ou viennent se plaindre chez moi." },
    { vraag: "8.19 (Train) Quels sont les probl√®mes mat√©riels fr√©quents ?", antwoord: "Des portes qui ne s'ouvrent pas, des toilettes bouch√©es, ou le syst√®me d'annonce sonore qui ne fonctionne pas." },
    { vraag: "8.20 En cas d‚Äôaccident et/ou de suicide que devez-vous faire ?", antwoord: "Je ne laisse personne descendre. Je rassure les voyageurs. Je contacte le conducteur et le SOC." },
    { vraag: "8.21 En cas de collision avec un ¬´ obstacle ¬ª ?", antwoord: "Le train s'arr√™te. Je v√©rifie s'il y a des bless√©s √† bord. Je communique avec le conducteur pour la suite." },
    { vraag: "8.22 Un train peut-il √™tre supprim√© ? Pour quelle raison ?", antwoord: "Oui. En cas de panne technique, d'absence du personnel, ou d'incident grave sur la ligne." },
    { vraag: "8.23 Que faites-vous si une porte ne s‚Äôouvre pas ?", antwoord: "Je colle un autocollant 'D√©rang√©', je la verrouille et je signale le probl√®me via ma tablette." },
    { vraag: "8.24 Quelles sont les causes des retards de trains ?", antwoord: "Les probl√®mes techniques, les travaux, les incidents de personnes et les correspondances." },
    { vraag: "8.25 A quelles compensations a droit le voyageur (retard) ?", antwoord: "Si le retard est de plus de 60 minutes, il a droit √† une compensation. Il doit remplir un formulaire sur le site SNCB." },
    { vraag: "8.26 Que faites-vous si le chauffage/airco ne fonctionne pas ?", antwoord: "J'essaie de d√©placer les voyageurs. Si tout le train est en panne, je signale le probl√®me au conducteur." },
    { vraag: "8.27 Avez-vous eu un incident grave ?", antwoord: "Non, jamais d'incident grave jusqu'√† pr√©sent. (OU: Oui, un accident √† un passage √† niveau)." },

    // 9. Securite
    { vraag: "9.1 Qu‚Äôest-ce qui est le plus important : la s√©curit√© ou le contr√¥le?", antwoord: "La s√©curit√©. C'est la priorit√© absolue. Si la s√©curit√© n'est pas assur√©e, le train ne peut pas partir." },
    { vraag: "9.2 ¬´ Je suis responsable de la s√©curit√© ¬ª, qu‚Äôest-ce que √ßa signifie ?", antwoord: "Je dois veiller √† ce que les portes soient ferm√©es, qu'aucun voyageur ne soit en danger, et r√©agir en cas d'incident." },
    { vraag: "9.3 Qu‚Äôest-ce que ¬´ pr√©parer le train ¬ª ?", antwoord: "C'est v√©rifier le train avant le premier d√©part : tester les freins, v√©rifier les portes, l'√©clairage et la propret√©." },
    { vraag: "9.4 Comment donnez-vous le d√©part ?", antwoord: "Je v√©rifie le quai, je ferme les portes. Je v√©rifie qu'il n'y a personne coinc√©. Je donne le signal au conducteur." },
    { vraag: "9.5 Le d√©part, est-il un moment dangereux ?", antwoord: "Oui, c'est critique. Un voyageur peut essayer de monter au dernier moment. Je surveille jusqu'√† la fin du quai." },
    { vraag: "9.6 Pour quelles raisons peut-on tirer le signal d‚Äôalarme ?", antwoord: "Uniquement en cas de danger imm√©diat pour les personnes : incendie, agression tr√®s grave, ou probl√®me m√©dical." },
    { vraag: "9.7 Que signifie ¬´ isoler une porte ¬ª ?", antwoord: "C'est la verrouiller m√©caniquement. Je le fais si elle est d√©fectueuse et ne ferme plus correctement." },
    { vraag: "9.8 S√©curit√© trains longs / quai courbe ?", antwoord: "Je demande l'aide d'un coll√®gue pour surveiller l'autre partie, ou je descends sur le quai pour avoir une meilleure vue." },
    { vraag: "9.9 Qu‚Äôest-ce que le SOC ?", antwoord: "C'est le Security Operations Center. La centrale de s√©curit√© de la SNCB disponible 24h/24 pour les urgences." },

    // 10. Examen SELOR
    { vraag: "10.1 Est-ce la premi√®re fois que vous pr√©sentez l‚Äôexamen ?", antwoord: "Oui, c'est la premi√®re fois. (OU: Non, j'avais √©chou√© √† cause du stress. J'ai beaucoup pratiqu√© depuis)." },
    { vraag: "10.2 Comment avez-vous pr√©par√© cet examen ?", antwoord: "J'ai r√©vis√© mon vocabulaire ferroviaire, lu les proc√©dures et pratiqu√© la conversation avec des coll√®gues francophones." },
    { vraag: "10.3 Que faites-vous au cours de fran√ßais ?", antwoord: "Nous faisons des exercices de grammaire, apprenons le vocabulaire m√©tier et faisons des jeux de r√¥le." },
    { vraag: "10.4 Pourquoi pr√©sentez-vous cet examen ?", antwoord: "Pour √™tre nomm√© statutaire et obtenir la prime de bilinguisme. C'est aussi important pour bien servir les clients." },
    { vraag: "10.5 Avez-vous (souvent) l‚Äôoccasion de parler fran√ßais ?", antwoord: "Oui, je travaille souvent √† Bruxelles ou sur des lignes vers la Wallonie, donc je parle fran√ßais tous les jours." },
    { vraag: "10.6 Trouvez-vous n√©cessaire d‚Äô√™tre bilingue ?", antwoord: "Oui, absolument. C'est un service public belge. On doit pouvoir aider tout le monde. C'est une marque de respect." },
    { vraag: "10.7 Qu‚Äôallez-vous faire apr√®s l‚Äôexamen ?", antwoord: "Je vais continuer √† pratiquer mon fran√ßais pour ne pas perdre mon niveau." },

    // 11. Divers
    { vraag: "11.1 Racontez-nous une anecdote !", antwoord: "Une fois, un chien est mont√© dans le train tout seul. Il √©tait tr√®s gentil. On l'a gard√© en cabine jusqu'√† l'arriv√©e de la police." },
    { vraag: "11.2 Vous souvenez-vous de votre premier service ?", antwoord: "Oui, j'√©tais tr√®s nerveux. J'avais peur de me tromper. Mais mon moniteur m'a bien aid√© et tout s'est bien pass√©." },

    // 12. Employeur
    { vraag: "12.1 Quelle est l‚Äôactualit√© SNCB du moment ?", antwoord: "On parle des nouveaux trains M7 double √©tage, des nouveaux horaires de d√©cembre et du recrutement." },
    { vraag: "12.2 Que changeriez-vous √† la SNCB ?", antwoord: "J'aimerais qu'il y ait moins de retards pour que les voyageurs soient contents. Et des horaires plus r√©guliers pour la sant√©." },

    // 13. Le jour J (Volledig)
    { vraag: "13.1 Il s‚Äôagit d‚Äôun entretien relatif √† des sujets li√©s au travail. R√©action ?", antwoord: "C'est not√©. Je vais me concentrer sur la clart√© de mon fran√ßais, tout en parlant de mon exp√©rience professionnelle √† la SNCB." },
    { vraag: "13.2 Conseils : Comment allez-vous vous comporter ?", antwoord: "Je veillerai √† rester calme, poli et souriant. Je prendrai le temps de r√©fl√©chir avant de r√©pondre pour faire des phrases correctes." },
    { vraag: "13.3 L‚Äôentretien n‚Äôaborde que des situations de travail. D'accord ?", antwoord: "D'accord. Je resterai professionnel et je parlerai uniquement de mon m√©tier, sauf si le jury me pose une question personnelle sp√©cifique." },
    { vraag: "13.4 Avez-vous pr√©par√© des questions clients ?", antwoord: "J'ai pr√©par√© des r√©ponses aux questions fr√©quentes des voyageurs, comme les retards, les correspondances et les types de billets." },
    { vraag: "13.5 Allez-vous donner des r√©ponses standard ?", antwoord: "Non, je vais utiliser des exemples r√©els de mon quotidien pour rendre mes r√©ponses vivantes et concr√®tes." },
    { vraag: "13.6 Donnez des d√©tails et des exemples, si n√©cessaire.", antwoord: "Si je sens que ma r√©ponse est trop courte, j'ajouterai une anecdote ou un d√©tail pr√©cis sur une proc√©dure." }
  ];

  let index = 0;
  let timerInterval;
  let zelftestTimerInterval;
  let zelftestIndex = 0;

  // =========================
  // TAB NAV
  // =========================
  function showTab(tabId, btn) {
    clearInterval(timerInterval);
    clearInterval(zelftestTimerInterval);
    document.getElementById("zelftestTimer").innerText = "50 sec";
    document.getElementById("timer").innerText = "00:60";

    document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
    document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));
    document.getElementById(tabId).classList.add("active");
    if (btn) btn.classList.add("active");

    if (tabId === "zelftest") {
      // Optioneel: meteen timer starten of wachten op klik
    }
  }

  // =========================
  // OEFENEN
  // =========================
  function toggleAntwoord() {
    const el = document.getElementById("oefenAntwoord");
    el.style.display = (el.style.display === "none") ? "block" : "none";
  }

  function volgendeVraag() {
    index = (index + 1) % vragen.length;
    updateOefen();
  }

  function vorigeVraag() {
    index = (index - 1 + vragen.length) % vragen.length;
    updateOefen();
  }

  function updateOefen() {
    const v = vragen[index];
    document.getElementById("oefenVraag").innerText = v.vraag;
    document.getElementById("oefenAntwoord").innerText = v.antwoord;
    document.getElementById("oefenAntwoord").style.display = "none";
    
    // Counter update
    document.getElementById("oefenCounter").innerText = index + 1;
    document.getElementById("oefenTotal").innerText = vragen.length;
  }

  // =========================
  // ZELFTEST
  // =========================
  function initZelftest() {
    const ul = document.getElementById("zelftestVragen");
    ul.innerHTML = "";

    vragen.forEach((v, i) => {
      const li = document.createElement("li");
      li.style.cursor = "pointer";
      li.innerText = v.vraag.substring(0, 50) + "..."; // Korte preview
      if(v.vraag.length < 50) li.innerText = v.vraag;
      
      li.onclick = () => {
        // Highlight active item
        document.querySelectorAll("#zelftestVragen li").forEach(item => item.classList.remove("selected"));
        li.classList.add("selected");
        selectZelftestQuestion(i);
      };
      ul.appendChild(li);
    });
  }

  function startZelftestTimer() {
    clearInterval(zelftestTimerInterval);
    let tijd = 50;
    const el = document.getElementById("zelftestTimer");
    el.innerText = "Tijd: 50 sec";
    el.style.color = "#d32f2f";

    zelftestTimerInterval = setInterval(() => {
      tijd--;
      el.innerText = "Tijd: " + tijd + " sec";
      if (tijd <= 0) {
        clearInterval(zelftestTimerInterval);
        el.innerText = "TIJD OM! Stop met spreken.";
        el.style.color = "#000";
      }
    }, 1000);
  }

  function selectZelftestQuestion(i) {
    zelftestIndex = i;
    const v = vragen[zelftestIndex];
    document.getElementById("zelftestActiveVraag").innerText = v.vraag;
    startZelftestTimer();
    
    // Scroll naar boven in de sectie
    document.getElementById("zelftest").scrollIntoView();
  }

  // =========================
  // SIMULATIE
  // =========================
  function startSimulatie() {
    clearInterval(timerInterval);
    document.getElementById("simAudioBtn").style.display = "none";

    const randomIndex = Math.floor(Math.random() * vragen.length);
    const v = vragen[randomIndex];

    document.getElementById("simVraag").innerText = v.vraag;
    document.getElementById("simAntwoord").innerText = v.antwoord;
    document.getElementById("simAntwoord").style.display = "none";

    let tijd = 60;
    const el = document.getElementById("timer");
    el.innerText = "00:60";
    el.style.color = "#d32f2f";

    timerInterval = setInterval(() => {
      tijd--;
      let sec = tijd < 10 ? "0" + tijd : tijd;
      el.innerText = "00:" + sec;
      if (tijd <= 10) el.style.color = "red";
      
      if (tijd <= 0) {
        clearInterval(timerInterval);
        el.innerText = "TIJD OM!";
        el.style.color = "black";
      }
    }, 1000);
  }

  function toonSimAntwoord() {
    document.getElementById("simAntwoord").style.display = "block";
    document.getElementById("simAudioBtn").style.display = "flex";
    clearInterval(timerInterval); // Stop timer als je eerder klaar bent
  }

  // =========================
  // SPEECH (TTS)
  // =========================
  let cachedVoices = [];

  function loadVoices() {
    cachedVoices = window.speechSynthesis ? window.speechSynthesis.getVoices() : [];
  }

  if ("speechSynthesis" in window) {
    loadVoices();
    window.speechSynthesis.onvoiceschanged = loadVoices;
  }

  function pickFrenchVoice() {
    const voices = cachedVoices || [];
    // Voorkeur: Frans-Belgi√´, anders Frankrijk
    return voices.find(v => v.lang === "fr-BE") || 
           voices.find(v => v.lang === "fr-FR") || 
           voices.find(v => v.lang.startsWith("fr"));
  }

  // NIEUWE CODE (PLAK DIT IN DE PLAATS)
  function speakText(text) {
    if (!text) return;

    // 1. Stop alles wat de gsm misschien nog aan het zeggen is (Belangrijk voor iPhone!)
    window.speechSynthesis.cancel();

    // 2. Maak de zin klaar
    const utter = new SpeechSynthesisUtterance(text);
    
    // 3. Forceer de taal naar Frans (Dit werkt altijd, ook zonder stemmenlijst)
    utter.lang = "fr-FR"; 
    utter.rate = 0.9; // Iets trager spreektempo

    // 4. Probeer optioneel een betere stem te vinden, maar zonder te crashen
    const voices = window.speechSynthesis.getVoices();
    const frVoice = voices.find(v => v.lang.toLowerCase().includes("fr"));
    if (frVoice) {
        utter.voice = frVoice;
    }

    // 5. Spreek
    window.speechSynthesis.speak(utter);
  }
  
  // Functie: Verwijdert nummering aan het begin (bv. "1.1 " of "5.2.3 ")
  function stripPrefixForSpeech(text) {
    // Regex zoekt naar cijfers en punten aan het begin, gevolgd door spatie
    return text.replace(/^[0-9.]+\s+/, "");
  }

  // =========================
  // AUDIO RECORDING
  // =========================
  let mediaRecorder;
  let audioChunks = [];
  let audioBlobUrl;

  async function startRecording() {
    const status = document.getElementById("recStatus");
    status.innerText = "Toegang vragen...";
    
    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
      status.innerText = "Opnemen niet ondersteund in deze browser.";
      return;
    }

    try {
      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
      mediaRecorder = new MediaRecorder(stream);
      audioChunks = [];

      mediaRecorder.ondataavailable = event => {
        audioChunks.push(event.data);
      };

      mediaRecorder.onstop = () => {
        const audioBlob = new Blob(audioChunks, { type: 'audio/mp4' }); // mp4 werkt vaak beter op iOS
        if (audioBlobUrl) URL.revokeObjectURL(audioBlobUrl);
        audioBlobUrl = URL.createObjectURL(audioBlob);
        const audioEl = document.getElementById("recAudio");
        audioEl.src = audioBlobUrl;
        audioEl.style.display = "block";
        
        document.getElementById("btnRecPlay").disabled = false;
        status.innerText = "Klaar. Druk op Luister.";
      };

      mediaRecorder.start();
      document.getElementById("btnRecStart").disabled = true;
      document.getElementById("btnRecStop").disabled = false;
      document.getElementById("btnRecPlay").disabled = true;
      status.innerText = "üî¥ Aan het opnemen...";

    } catch (err) {
      console.error(err);
      status.innerText = "Fout: Microfoon toegang geweigerd.";
    }
  }

  function stopRecording() {
    if (mediaRecorder && mediaRecorder.state !== "inactive") {
      mediaRecorder.stop();
      document.getElementById("btnRecStart").disabled = false;
      document.getElementById("btnRecStop").disabled = true;
    }
  }

  function playRecording() {
    const audioEl = document.getElementById("recAudio");
    audioEl.play();
  }

  // =========================
  // HELPERS
  // =========================
  function toggleHelp(id) {
    const el = document.getElementById(id);
    el.style.display = (el.style.display === "none") ? "block" : "none";
  }

  // Start
  updateOefen();
  initZelftest();

</script>

</body>
</html>